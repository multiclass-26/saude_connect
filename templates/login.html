{% extends 'base.html' %}
{% load static %}

{% block body_class %}bg-login{% endblock %}

{% block content %}
<section class="screen active">
    <header class="brand">
        <img src="{% static 'assets/logo.png' %}" alt="Logo Connect" class="logo">
        <div>
            <h1>SAÚDE CONECTADA</h1>
            <p class="subtitle">Onde a tecnologia encontra o cuidado</p>
        </div>
    </header>
    
    <nav class="login-block">
        <button onclick="showLoginForm('agente')">Agente de Saúde</button>
        <button onclick="showLoginForm('medico')">Médico</button>
        <button onclick="showLoginForm('paciente')">Paciente</button>
        <a href="{% url 'registro' %}" id="btn-register-home" style="text-align: center; text-decoration: none; width: 90%; max-width: 380px;">
            <button style="width: 100%;">Registrar-se</button>
        </a>
    </nav>

    <!-- Credenciais de Teste -->
    <div class="credentials-panel panel" style="margin-top: 20px; max-width: 500px; margin-left: auto; margin-right: auto;">
        <h3 style="margin-top: 0; font-size: 1.1rem; color: var(--accent-dark);">Credenciais de Teste</h3>
        <div style="display: grid; gap: 12px; font-size: 0.9rem;">
            <div style="background: #f9fafb; padding: 10px; border-radius: 8px; border-left: 3px solid var(--accent);">
                <strong>Agente de Saúde:</strong><br>
                ID: <code style="background: #e5e7eb; padding: 2px 6px; border-radius: 4px;">AG001</code> | 
                Senha: <code style="background: #e5e7eb; padding: 2px 6px; border-radius: 4px;">123</code>
            </div>
            <div style="background: #f9fafb; padding: 10px; border-radius: 8px; border-left: 3px solid var(--accent);">
                <strong>Médico:</strong><br>
                CRM: <code style="background: #e5e7eb; padding: 2px 6px; border-radius: 4px;">CRM12345</code> | 
                Senha: <code style="background: #e5e7eb; padding: 2px 6px; border-radius: 4px;">123</code>
            </div>
            <div style="background: #f9fafb; padding: 10px; border-radius: 8px; border-left: 3px solid var(--accent);">
                <strong>Paciente:</strong><br>
                CPF: <code style="background: #e5e7eb; padding: 2px 6px; border-radius: 4px;">111.222.333-44</code> | 
                Senha: <code style="background: #e5e7eb; padding: 2px 6px; border-radius: 4px;">123</code>
            </div>
        </div>
    </div>

    <div id="login-forms" style="display: none; margin-top: 20px;">
        <form method="post" class="form panel">
            {% csrf_token %}
            <input type="hidden" id="tipo-login" name="tipo" value="">
            <h3 id="form-title"></h3>
            <input type="text" id="identificador" name="identificador" placeholder="" required>
            <input type="password" name="senha" placeholder="Senha" required>
            <button type="submit" class="primary">Entrar</button>
            <button type="button" onclick="hideLoginForm()" class="back">← Voltar</button>
        </form>
    </div>
</section>

<script>
function showLoginForm(tipo) {
    const loginForms = document.getElementById('login-forms');
    const loginBlock = document.querySelector('.login-block');
    const brand = document.querySelector('.brand');
    const credentials = document.querySelector('.credentials-panel');
    
    loginForms.style.display = 'block';
    loginBlock.style.display = 'none';
    brand.style.display = 'none';
    if (credentials) credentials.style.display = 'none';
    
    document.getElementById('tipo-login').value = tipo;
    
    const placeholders = {
        'agente': 'Digite o ID do Agente',
        'medico': 'Digite o CRM',
        'paciente': 'Digite o CPF'
    };
    
    const titles = {
        'agente': 'Login - Agente de Saúde',
        'medico': 'Login - Médico',
        'paciente': 'Login - Paciente'
    };
    
    document.getElementById('identificador').placeholder = placeholders[tipo];
    document.getElementById('form-title').textContent = titles[tipo];
}

function hideLoginForm() {
    const loginForms = document.getElementById('login-forms');
    const loginBlock = document.querySelector('.login-block');
    const brand = document.querySelector('.brand');
    const credentials = document.querySelector('.credentials-panel');
    
    loginForms.style.display = 'none';
    loginBlock.style.display = 'flex';
    brand.style.display = 'flex';
    if (credentials) credentials.style.display = 'block';
}
</script>
{% endblock %}
